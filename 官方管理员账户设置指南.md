# ClearLot 官方管理员账户设置指南

## 📋 概述

本指南将帮助您设置新的官方管理员账户，用于管理 ClearLot 平台。新的管理员账户与普通用户登录完全分离，专门用于系统管理。

## 🔑 新的官方管理员凭据

- **邮箱**: `support@clearlot.app`
- **密码**: `cl777888`
- **角色**: 超级管理员 (Super Admin)
- **权限**: 完整系统管理权限

## 🚀 设置方法

### 方法一：使用设置页面（推荐）

1. **访问设置页面**
   - 在浏览器中访问: `http://localhost:5173/hk/admin/setup`
   - 或者将 `AdminSetupPage` 组件添加到路由中

2. **创建管理员账户**
   - 点击"创建官方管理员账户"按钮
   - 等待创建完成
   - 查看成功消息

3. **登录管理系统**
   - 访问: `http://localhost:5173/hk/admin/login`
   - 使用新凭据登录

### 方法二：使用浏览器控制台

1. **打开浏览器控制台**
   - 按 F12 或右键选择"检查"
   - 切换到 Console 标签

2. **运行创建脚本**
   ```javascript
   // 导入创建函数
   import { createOfficialAdmin } from './src/services/adminService';
   
   // 创建官方管理员账户
   createOfficialAdmin();
   ```

3. **查看创建结果**
   - 控制台会显示创建进度和结果
   - 成功后会显示账户信息

### 方法三：手动创建（高级用户）

1. **使用 Firebase 控制台**
   - 登录 Firebase 控制台
   - 进入 Authentication 部分
   - 手动添加用户: `support@clearlot.app`

2. **设置 Firestore 文档**
   - 在 `users` 集合中创建用户文档
   - 设置 `isAdmin: true`
   - 添加必要的用户信息

## 🔐 登录系统

### 管理员登录页面
- **URL**: `/hk/admin/login`
- **功能**: 专门的管理员登录界面
- **验证**: 检查用户是否为管理员

### 登录流程
1. 输入邮箱和密码
2. Firebase 身份验证
3. 检查管理员权限
4. 设置本地存储会话
5. 重定向到管理仪表板

## 🛡️ 安全特性

### 权限控制
- **管理员验证**: 只有 `isAdmin: true` 的用户可以登录
- **会话管理**: 使用 localStorage 存储管理员会话
- **自动登出**: 非管理员用户会被自动登出

### 数据保护
- **分离登录**: 管理员登录与用户登录完全分离
- **权限检查**: 每个管理页面都会验证管理员状态
- **安全路由**: 受保护的管理员路由

## 📱 管理员功能

### 可用功能
- ✅ 用户管理
- ✅ 商品管理
- ✅ 交易管理
- ✅ 发票管理
- ✅ 消息管理
- ✅ 系统设置

### 管理页面
- **仪表板**: `/hk/admin/dashboard`
- **用户管理**: `/hk/admin/users`
- **商品管理**: `/hk/admin/offers`
- **交易管理**: `/hk/admin/transactions`
- **发票管理**: `/hk/admin/invoices`
- **消息管理**: `/hk/admin/messages`

## 🔧 故障排除

### 常见问题

**Q: 无法创建管理员账户**
- 检查 Firebase 配置是否正确
- 确保有创建用户的权限
- 查看浏览器控制台错误信息

**Q: 登录失败**
- 确认邮箱和密码正确
- 检查用户是否已设置为管理员
- 验证 Firestore 用户文档

**Q: 权限不足**
- 确认用户文档中 `isAdmin: true`
- 检查用户角色和权限设置
- 重新登录以刷新权限

### 调试步骤

1. **检查 Firebase 连接**
   ```javascript
   console.log('Firebase Auth:', auth);
   console.log('Firebase DB:', db);
   ```

2. **验证用户状态**
   ```javascript
   // 检查当前用户
   console.log('Current User:', auth.currentUser);
   
   // 检查用户文档
   const userDoc = await getDoc(doc(db, 'users', userId));
   console.log('User Data:', userDoc.data());
   ```

3. **测试管理员权限**
   ```javascript
   import { checkAdminStatus } from './src/services/adminService';
   const isAdmin = await checkAdminStatus(userId);
   console.log('Is Admin:', isAdmin);
   ```

## 📞 支持

如果您在设置过程中遇到任何问题，请：

1. 查看浏览器控制台错误信息
2. 检查 Firebase 控制台日志
3. 确认网络连接正常
4. 联系技术支持团队

## 🔄 更新日志

- **2025-01-XX**: 创建官方管理员账户系统
- **2025-01-XX**: 添加新的管理员凭据
- **2025-01-XX**: 实现分离的管理员登录系统

---

**注意**: 请妥善保管管理员凭据，不要在不安全的环境中分享这些信息。

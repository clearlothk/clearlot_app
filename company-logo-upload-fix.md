# ğŸ¢ å…¬å¸æ¨™èªŒä¸Šå‚³åŠŸèƒ½ä¿®å¾©ç¸½çµ

## **âœ… å·²ä¿®å¾©çš„å•é¡Œ**

### **1. ä¸»è¦å•é¡Œ**
- **å•é¡Œ**: å…¬å¸æ¨™èªŒä¸Šå‚³å¾Œåªä¿å­˜ base64 æ•¸æ“šåˆ° Firestoreï¼Œæ²’æœ‰ä¸Šå‚³åˆ° Firebase Storage
- **çµæœ**: æ¨™èªŒç„¡æ³•æ­£å¸¸é¡¯ç¤ºï¼Œå­˜å„²ç©ºé–“æµªè²»ï¼Œæ€§èƒ½å•é¡Œ

### **2. ä¿®å¾©å…§å®¹**
- **Firebase Storage ä¸Šå‚³**: ç¾åœ¨æ­£ç¢ºä¸Šå‚³åˆ° Storage
- **URL ä¿å­˜**: ä¿å­˜ Storage ä¸‹è¼‰ URL è€Œä¸æ˜¯ base64
- **æ–‡ä»¶åˆªé™¤**: åˆªé™¤æ¨™èªŒæ™‚åŒæ™‚å¾ Storage åˆªé™¤æ–‡ä»¶
- **åŠ è¼‰ç‹€æ…‹**: æ·»åŠ ä¸Šå‚³ä¸­çš„è¦–è¦ºåé¥‹

## **ğŸ”§ æŠ€è¡“å¯¦ç¾**

### **ä¿®å¾©å‰çš„å•é¡Œä»£ç¢¼**
```typescript
// åªä¿å­˜ base64 æ•¸æ“šï¼Œæ²’æœ‰ä¸Šå‚³åˆ° Storage
const reader = new FileReader();
reader.onload = async (event) => {
  const imageUrl = event.target?.result as string; // base64 æ•¸æ“š
  setLogoPreview(imageUrl);
  await updateUser({ companyLogo: imageUrl });
};
reader.readAsDataURL(file);
```

### **ä¿®å¾©å¾Œçš„è§£æ±ºæ–¹æ¡ˆ**
```typescript
// æ­£ç¢ºä¸Šå‚³åˆ° Firebase Storage
const timestamp = Date.now();
const fileName = `users/${user.id}/company-logo/${timestamp}_${file.name}`;
const storageRef = ref(storage, fileName);

// ä¸Šå‚³åˆ° Storage
const snapshot = await uploadBytes(storageRef, file);
const downloadURL = await getDownloadURL(snapshot.ref);

// ä¿å­˜ Storage URL åˆ° Firestore
await updateUser({ companyLogo: downloadURL });
```

### **æ–‡ä»¶åˆªé™¤åŠŸèƒ½**
```typescript
// åˆªé™¤æ™‚åŒæ™‚å¾ Storage åˆªé™¤
if (user.companyLogo && user.companyLogo.startsWith('https://')) {
  const logoRef = ref(storage, user.companyLogo);
  await deleteObject(logoRef);
}
await updateUser({ companyLogo: '' });
```

## **ğŸ“‹ åŠŸèƒ½ç‰¹é»**

### **ä¸Šå‚³æµç¨‹**
1. **æ–‡ä»¶é©—è­‰**: æª¢æŸ¥æ–‡ä»¶é¡å‹å’Œå¤§å°
2. **Storage ä¸Šå‚³**: ä¸Šå‚³åˆ° Firebase Storage
3. **URL ç²å–**: ç²å–ä¸‹è¼‰ URL
4. **Firestore ä¿å­˜**: ä¿å­˜ URL åˆ°ç”¨æˆ¶æ–‡æª”
5. **é è¦½æ›´æ–°**: æ›´æ–°ç•Œé¢é è¦½

### **æ–‡ä»¶ç®¡ç†**
- **è·¯å¾‘**: `users/{userId}/company-logo/{timestamp}_{filename}`
- **å¤§å°é™åˆ¶**: 10MB
- **æ ¼å¼æ”¯æŒ**: PNG, JPG, GIF
- **å”¯ä¸€æ€§**: æ™‚é–“æˆ³ç¢ºä¿æ–‡ä»¶åå”¯ä¸€

### **ç”¨æˆ¶é«”é©—**
- **åŠ è¼‰ç‹€æ…‹**: ä¸Šå‚³æ™‚é¡¯ç¤º spinner
- **æˆåŠŸæç¤º**: ä¸Šå‚³æˆåŠŸå¾Œé¡¯ç¤ºç¢ºèªæ¶ˆæ¯
- **éŒ¯èª¤è™•ç†**: ä¸Šå‚³å¤±æ•—æ™‚é¡¯ç¤ºéŒ¯èª¤ä¿¡æ¯
- **æ‹–æ”¾æ”¯æŒ**: æ”¯æŒæ‹–æ”¾ä¸Šå‚³

## **ğŸ¯ ä¿®å¾©æ•ˆæœ**

### **æ€§èƒ½æ”¹é€²**
- âœ… **å­˜å„²æ•ˆç‡**: ä¸å†ä¿å­˜å¤§å‹ base64 æ•¸æ“š
- âœ… **åŠ è¼‰é€Ÿåº¦**: ä½¿ç”¨ CDN åŠ é€Ÿåœ–ç‰‡åŠ è¼‰
- âœ… **æ•¸æ“šåº«å¤§å°**: æ¸›å°‘ Firestore æ–‡æª”å¤§å°

### **åŠŸèƒ½å®Œæ•´æ€§**
- âœ… **æ­£ç¢ºé¡¯ç¤º**: æ¨™èªŒåœ¨æ‰€æœ‰åœ°æ–¹æ­£ç¢ºé¡¯ç¤º
- âœ… **æŒä¹…åŒ–**: ä¸Šå‚³å¾Œæ¨™èªŒæ°¸ä¹…ä¿å­˜
- âœ… **åˆªé™¤åŠŸèƒ½**: å¯ä»¥æ­£ç¢ºåˆªé™¤æ¨™èªŒå’Œæ–‡ä»¶

### **ç”¨æˆ¶é«”é©—**
- âœ… **å³æ™‚åé¥‹**: ä¸Šå‚³ç‹€æ…‹æ¸…æ™°é¡¯ç¤º
- âœ… **éŒ¯èª¤è™•ç†**: å‹å¥½çš„éŒ¯èª¤æç¤º
- âœ… **æ“ä½œç¢ºèª**: æˆåŠŸ/å¤±æ•—æ¶ˆæ¯

## **ğŸ” æ¸¬è©¦è¦é»**

### **ä¸Šå‚³æ¸¬è©¦**
- [x] é¸æ“‡åœ–ç‰‡æ–‡ä»¶ä¸Šå‚³
- [x] æ‹–æ”¾åœ–ç‰‡æ–‡ä»¶ä¸Šå‚³
- [x] æ–‡ä»¶é¡å‹é©—è­‰
- [x] æ–‡ä»¶å¤§å°é™åˆ¶
- [x] ä¸Šå‚³é€²åº¦é¡¯ç¤º

### **é¡¯ç¤ºæ¸¬è©¦**
- [x] ä¸Šå‚³å¾Œç«‹å³é¡¯ç¤º
- [x] é é¢åˆ·æ–°å¾Œé¡¯ç¤º
- [x] åœ¨å…¶ä»–çµ„ä»¶ä¸­é¡¯ç¤º
- [x] éŸ¿æ‡‰å¼é¡¯ç¤º

### **åˆªé™¤æ¸¬è©¦**
- [x] åˆªé™¤æ¨™èªŒæŒ‰éˆ•
- [x] Storage æ–‡ä»¶åˆªé™¤
- [x] Firestore æ•¸æ“šæ¸…ç†
- [x] ç•Œé¢æ›´æ–°

### **éŒ¯èª¤è™•ç†**
- [x] ç„¡æ•ˆæ–‡ä»¶é¡å‹
- [x] æ–‡ä»¶éå¤§
- [x] ç¶²çµ¡éŒ¯èª¤
- [x] æ¬Šé™éŒ¯èª¤

## **ğŸ“ æ–‡ä»¶çµæ§‹**

### **Storage è·¯å¾‘**
```
users/
  {userId}/
    company-logo/
      1756257289382_logo.png
      1756257289390_logo.jpg
```

### **Firestore æ•¸æ“š**
```json
{
  "companyLogo": "https://firebasestorage.googleapis.com/...",
  "company": "ABC Limited",
  // ... å…¶ä»–ç”¨æˆ¶æ•¸æ“š
}
```

## **ğŸš€ æœªä¾†æ”¹é€²**

### **å¯èƒ½çš„å„ªé€²**
1. **åœ–ç‰‡å£“ç¸®**: è‡ªå‹•å£“ç¸®å¤§åœ–ç‰‡
2. **å¤šå°ºå¯¸**: ç”Ÿæˆä¸åŒå°ºå¯¸çš„ç¸®ç•¥åœ–
3. **æ ¼å¼è½‰æ›**: è‡ªå‹•è½‰æ›ç‚º WebP æ ¼å¼
4. **CDN å„ªåŒ–**: ä½¿ç”¨ Cloud CDN åŠ é€Ÿ

### **é«˜ç´šåŠŸèƒ½**
1. **æ‰¹é‡ä¸Šå‚³**: æ”¯æŒå¤šå€‹æ¨™èªŒç‰ˆæœ¬
2. **ç‰ˆæœ¬æ§åˆ¶**: ä¿ç•™æ­·å²ç‰ˆæœ¬
3. **è‡ªå‹•å‚™ä»½**: å®šæœŸå‚™ä»½é‡è¦æ¨™èªŒ
4. **ä½¿ç”¨çµ±è¨ˆ**: æ¨™èªŒä½¿ç”¨æƒ…æ³åˆ†æ

## **ğŸ“ æ”¯æŒ**

å¦‚æœé‡åˆ°ä»»ä½•å•é¡Œï¼š
1. æª¢æŸ¥ Firebase Storage è¦å‰‡æ˜¯å¦æ­£ç¢º
2. ç¢ºèªç”¨æˆ¶æœ‰ä¸Šå‚³æ¬Šé™
3. é©—è­‰æ–‡ä»¶å¤§å°å’Œæ ¼å¼
4. æª¢æŸ¥ç¶²çµ¡é€£æ¥ç‹€æ…‹ 